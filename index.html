<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>កាលវិភាគប្រចាំសប្តាហ៍</title>
    <link href="https://fonts.googleapis.com/css2?family=Dangrek&family=Siemreap&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Siemreap', 'Khmer OS Battambang', 'Khmer OS', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-family: 'Dangrek', 'Khmer OS Muol', serif;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .current-time {
            font-family: 'Siemreap', sans-serif;
            font-size: 16px;
            margin-top: 10px;
            opacity: 0.9;
        }

        .schedule-wrapper {
            padding: 20px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 9px 15px;
            text-align: center;
            border: 1px solid #e0e0e0;
            font-size: 16px;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .current-day {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            animation: pulse 2s infinite;
        }

        .time-header {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            font-weight: bold;
            color: white;
            width: 140px;
        }

        .current-time-slot {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            animation: pulse 2s infinite;
        }

        .period-header {
            background: #5a67d8;
            color: white;
            font-family: 'Dangrek', serif;
            font-weight: bold;
            font-size: 18px;
            /* padding: 20px; */
        }

        .current-period {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            animation: pulse2 2s infinite;
        }

        .empty-cell {
            background: #f7fafc;
        }

        .class-cell {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            font-weight: bold;
            color: #2d3436;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
        }

        .class-cell a {
            color: #2d3436;
            text-decoration: none;
            display: block;
            width: 100%;
            height: 100%;
        }

        .class-cell a:hover {
            text-decoration: underline;
        }

        .class-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .current-class {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            color: white;
            font-weight: bold;
            animation: pulse 2s infinite;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }

        .current-class a {
            color: white;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes pulse2 {
            0%, 100% {
                transform: scale(0.5);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .morning {
            background: linear-gradient(135deg, #a8e6cf 0%, #56ccf2 100%);
        }

        .afternoon {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 20px;
            }

            th, td {
                padding: 10px;
                font-size: 14px;
            }

            .schedule-wrapper {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>កាលវិភាគប្រចាំសប្តាហ៍ និងបញ្ជីអវ្តមាន</h1>
            <div class="current-time" id="currentTime"></div>
        </div>

        <div class="schedule-wrapper">
            <table id="scheduleTable">
                <thead>
                    <tr>
                        <th>ម៉ោង</th>
                        <th data-day="1">ចន្ទ</th>
                        <th data-day="2">អង្គារ</th>
                        <th data-day="3">ពុធ</th>
                        <th data-day="4">ព្រហស្បតិ៍</th>
                        <th data-day="5">សុក្រ</th>
                        <th data-day="6">សៅរ៍</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="7" class="period-header morning" data-period="morning">ពេលព្រឹក</td>
                    </tr>
                    <tr data-time="7:00-8:00">
                        <td class="time-header">7h-8h</td>
                        <td class="empty-cell"></td>
                        <td class="class-cell" data-day="2"><a href="https://docs.google.com/spreadsheets/d/1ljIUjE-smRtFRPwpquaThyklG96LS0CT/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">7B</a></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                    </tr>
                    <tr data-time="8:00-9:00">
                        <td class="time-header">8h-9h</td>
                        <td class="class-cell" data-day="1"><a href="https://docs.google.com/spreadsheets/d/12ZivdV8tQgZFjNAaG--92Kv_C6Ot_g91/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">7C</a></td>
                        <td class="class-cell" data-day="2"><a href="https://docs.google.com/spreadsheets/d/1rU5Tc6X8Gb_mqYqloo4Jw2abt_ZYeMak/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">8C</a></td>
                        <td class="class-cell" data-day="3"><a href="https://docs.google.com/spreadsheets/d/16RQurMB8JmuUzb_HUa-iJF0kxzHnuGZF/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">7D</a></td>
                        <td class="class-cell" data-day="4"><a href="https://docs.google.com/spreadsheets/d/1AluUhJFjoBfOzpjVuQUB6WF21emVoi2j/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">8B</a></td>
                        <td class="class-cell" data-day="5"><a href="https://docs.google.com/spreadsheets/d/1H-QbMr0FxIUBQhdPbJ8WgoYL5Lk1Epv3/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">9A</a></td>
                        <td class="empty-cell"></td>
                    </tr>
                    <tr data-time="9:00-10:00">
                        <td class="time-header">9h-10h</td>
                        <td class="class-cell" data-day="1"><a href="https://docs.google.com/spreadsheets/d/1iQqP9qkJiH8I0kYwEORa5f4QN4om28fQ/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">7A</a></td>
                        <td class="class-cell" data-day="2"><a href="https://docs.google.com/spreadsheets/d/1zL9pNBw8RIeOikZpLFMS0KVZviSNQ6MM/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">8A</a></td>
                        <td class="class-cell" data-day="3"><a href="https://docs.google.com/spreadsheets/d/1JFJcy74hspNoRv7OTZIzGiA8eVUuRagb/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">8D</a></td>
                        <td class="class-cell" data-day="4"><a href="https://docs.google.com/spreadsheets/d/178M5GilutDuMIFgUuWESOisjOTB_XP0s/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">9B</a></td>
                        <td class="class-cell" data-day="5"><a href="https://docs.google.com/spreadsheets/d/1n199TaygJkyh-rilezI3z6wXTOygd0Ov/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">9C</a></td>
                        <td class="empty-cell"></td>
                    </tr>
                    <tr data-time="10:00-11:00">
                        <td class="time-header">10h-11h</td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                    </tr>
                    <tr data-time="11:00-12:00">
                        <td class="time-header">11h-12h</td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                    </tr>
                    <tr>
                        <td colspan="7" class="period-header afternoon" data-period="afternoon">ពេលរសៀល</td>
                    </tr>
                    <tr data-time="12:30-13:30">
                        <td class="time-header">12:30-1:30</td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                    </tr>
                    <tr data-time="13:30-14:30">
                        <td class="time-header">1:30-2:30</td>
                        <td class="empty-cell"></td>
                        <td class="class-cell" data-day="2"><a href="https://docs.google.com/spreadsheets/d/1PkzfmTKCg0LTo4IY8LvotOxx5_DABDbT/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">12B</a></td>
                        <td class="empty-cell"></td>
                        <td class="class-cell" data-day="4"><a href="https://docs.google.com/spreadsheets/d/1AJubgVeENLgockLMwqxP3-vccJug6oeN/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">11A</a></td>
                        <td class="class-cell" data-day="5"><a href="https://docs.google.com/spreadsheets/d/1rNQnC5CCIzy32U8DKxrCXD_wBOxGsmcr/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">11B</a></td>
                        <td class="empty-cell"></td>
                    </tr>
                    <tr data-time="14:30-15:30">
                        <td class="time-header">2:30-3:30</td>
                        <td class="empty-cell"></td>
                        <td class="class-cell" data-day="2"><a href="https://docs.google.com/spreadsheets/d/1nbnfFrm-mGdyWERrhIgsQXMtAkkgsxe9/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">12A</a></td>
                        <td class="empty-cell"></td>
                        <td class="class-cell" data-day="4"><a href="https://docs.google.com/spreadsheets/d/1xD3qlHwNi9FY1RzJNiQCDRnTD_bxwoYZ/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">12C</a></td>
                        <td class="class-cell" data-day="5"><a href="https://docs.google.com/spreadsheets/d/1fMvBwAd3wAY-tTRHH2C2BzFBHu9kRJeu/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">11C</a></td>
                        <td class="empty-cell"></td>
                    </tr>
                    <tr data-time="15:30-16:30">
                        <td class="time-header">3:30-4:30</td>
                        <td class="empty-cell"></td>
                        <td class="class-cell" data-day="2"><a href="https://docs.google.com/spreadsheets/d/1TRPsNytsa_c6jubcxFx1FUTj_rLvOaL4/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">10A</a></td>
                        <td class="empty-cell"></td>
                        <td class="class-cell" data-day="4"><a href="https://docs.google.com/spreadsheets/d/1ESSabgAPFRnonw_D_p_G0quFncRsytgF/edit?usp=sharing&ouid=106873112820874634745&rtpof=true&sd=true" target="_blank">10B</a></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                    </tr>
                    <tr data-time="16:30-17:30">
                        <td class="time-header">4:30-5:30</td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                        <td class="empty-cell"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function updateSchedule() {
            const now = new Date();
            const currentDay = now.getDay(); // 0 = Sunday, 1 = Monday, etc.
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentTimeInMinutes = currentHour * 60 + currentMinute;

            // Update current time display
            const days = ['អាទិត្យ', 'ចន្ទ', 'អង្គារ', 'ពុធ', 'ព្រហស្បតិ៍', 'សុក្រ', 'សៅរ៍'];
            
            // Determine if in class time or break time
            let timeStatus = 'ម៉ោងសម្រាក'; // Default: break time
            let isInClass = false;

            // Check each time slot to see if we're in class
            const rows = document.querySelectorAll('tr[data-time]');
            rows.forEach(row => {
                const timeRange = row.getAttribute('data-time');
                const [start, end] = timeRange.split('-');
                const [startHour, startMin] = start.split(':').map(Number);
                const [endHour, endMin] = end.split(':').map(Number);
                
                const startTimeInMinutes = startHour * 60 + startMin;
                const endTimeInMinutes = endHour * 60 + endMin;

                // If current time is within this slot and there's a class
                if (currentTimeInMinutes >= startTimeInMinutes && currentTimeInMinutes < endTimeInMinutes) {
                    const classCell = row.querySelector(`.class-cell[data-day="${currentDay}"]`);
                    if (classCell) {
                        timeStatus = 'ម៉ោងរៀន';
                        isInClass = true;
                    }
                }
            });

            const timeString = `${days[currentDay]} - ${currentHour.toString().padStart(2, '0')}:${currentMinute.toString().padStart(2, '0')} (${timeStatus})`;
            document.getElementById('currentTime').textContent = timeString;

            // Remove all current highlights
            document.querySelectorAll('.current-day').forEach(el => el.classList.remove('current-day'));
            document.querySelectorAll('.current-class').forEach(el => el.classList.remove('current-class'));
            document.querySelectorAll('.current-period').forEach(el => el.classList.remove('current-period'));
            document.querySelectorAll('.current-time-slot').forEach(el => el.classList.remove('current-time-slot'));

            // Highlight current day (Monday = 1, Saturday = 6, skip Sunday = 0)
            if (currentDay >= 1 && currentDay <= 6) {
                const dayHeaders = document.querySelectorAll(`th[data-day="${currentDay}"]`);
                dayHeaders.forEach(header => header.classList.add('current-day'));

                // Check each time slot
                const rows = document.querySelectorAll('tr[data-time]');
                rows.forEach(row => {
                    const timeRange = row.getAttribute('data-time');
                    const [start, end] = timeRange.split('-');
                    const [startHour, startMin] = start.split(':').map(Number);
                    const [endHour, endMin] = end.split(':').map(Number);
                    
                    const startTimeInMinutes = startHour * 60 + startMin;
                    const endTimeInMinutes = endHour * 60 + endMin;

                    // If current time is within this slot
                    if (currentTimeInMinutes >= startTimeInMinutes && currentTimeInMinutes < endTimeInMinutes) {
                        // Highlight the time slot header
                        const timeHeader = row.querySelector('.time-header');
                        if (timeHeader) {
                            timeHeader.classList.add('current-time-slot');
                        }

                        // Highlight the class for current day
                        const classCell = row.querySelector(`.class-cell[data-day="${currentDay}"]`);
                        if (classCell) {
                            classCell.classList.add('current-class');
                        }

                        // Determine and highlight current period
                        if (startTimeInMinutes < 12 * 60) {
                            const morningPeriod = document.querySelector('[data-period="morning"]');
                            if (morningPeriod) morningPeriod.classList.add('current-period');
                        } else {
                            const afternoonPeriod = document.querySelector('[data-period="afternoon"]');
                            if (afternoonPeriod) afternoonPeriod.classList.add('current-period');
                        }
                    }
                });
            }
        }

        // Update immediately on load
        updateSchedule();

        // Update every 30 seconds
        setInterval(updateSchedule, 30000);
    </script>
</body>

</html>
